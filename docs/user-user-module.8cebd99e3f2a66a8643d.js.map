{"version":3,"sources":["./src/app/user/user.module.ts","./src/app/user-detail/user-detail.component.ts","./src/app/user-detail/user-detail.component.scss","./src/app/user/user-routing.module.ts","./src/app/user-detail/user-detail.component.html"],"names":[],"mappings":"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","file":"user-user-module.8cebd99e3f2a66a8643d.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { UserRoutingModule } from './user-routing.module';\nimport { UserDetailComponent } from '../user-detail/user-detail.component';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n\n@NgModule({\n  declarations: [\n    UserDetailComponent\n  ],\n  imports: [\n    CommonModule,\n    UserRoutingModule,\n    ReactiveFormsModule\n  ]\n})\nexport class UserModule { }\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ModalDismissReasons, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Observable, Subscription, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { LoginService } from '../login/login.service';\nimport { User, UserService } from '../user/user.service';\n\n@Component({\n  selector: 'ipfgp-user-detail',\n  templateUrl: './user-detail.component.html',\n  styleUrls: ['./user-detail.component.scss']\n})\nexport class UserDetailComponent implements OnInit, OnDestroy {\n\n  user$: Observable<User> | null = null;\n  error: Object | null = null;\n  deleteUserSubscription: Subscription | null = null;\n  deleteError: Object | null = null;\n  closeResult = '';\n\n  constructor(private userService: UserService, private route: ActivatedRoute,\n    private router: Router, private loginService: LoginService,\n    private modalService: NgbModal) {\n  }\n\n  ngOnInit(): void {\n    this.user$ = this.userService.getCurrentUser()\n      .pipe(\n        catchError((err) => {\n          this.router.navigate(['/login']);\n          return throwError(err);\n        })\n      );\n  }\n\n  ngOnDestroy() {\n    if (this.deleteUserSubscription != null) this.deleteUserSubscription.unsubscribe();\n  }\n\n  deleteUser() {\n    this.deleteUserSubscription = this.userService.deleteUser()\n      .subscribe(() => {\n        this.deleteError = false;\n        this.loginService.logOut();\n        this.userService.logOut();\n        this.router.navigate(['/login']);\n      },\n        () => this.deleteError = true);\n  }\n\n  open(content: any) {\n    this.modalService.open(content).result.then((result) => {\n      this.closeResult = `Closed with: ${result}`;\n    }, (reason) => {\n      this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\n    });\n  }\n\n  private getDismissReason(reason: any): string {\n    if (reason === ModalDismissReasons.ESC) {\n      return 'by pressing ESC';\n    } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\n      return 'by clicking on a backdrop';\n    } else {\n      return `with: ${reason}`;\n    }\n  }  \n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1c2VyLWRldGFpbC5jb21wb25lbnQuc2NzcyJ9 */\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { UserDetailComponent } from '../user-detail/user-detail.component';\n\nconst routes: Routes = [{\n  path: '',\n  component: UserDetailComponent\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class UserRoutingModule { }\n","export default \"<h2>User Detail</h2>\\n<div *ngIf=\\\"user$ | async as user; else loadingOrError\\\">\\n  <div class=\\\"table-responsive-sm\\\" *ngIf=\\\"user; else notFound\\\">\\n    <table class=\\\"table table-sm\\\">\\n      <thead>\\n        <tr class=\\\"table-secondary\\\">\\n          <th scope=\\\"col\\\">Name</th>\\n          <th scope=\\\"col\\\">Value</th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        <tr>\\n          <th>Username</th>\\n          <td>{{ user.username }}</td>\\n        </tr>\\n        <tr>\\n          <th>E-mail</th>\\n          <td>{{ user.email }}</td>\\n        </tr>        \\n        <tr>\\n          <th>Given Name</th>\\n          <td>{{ user.givenName }}</td>\\n        </tr>\\n        <tr>\\n          <th>Family Name</th>\\n          <td>{{ user.familyName }}</td>\\n        </tr>\\n        <tr>\\n          <th>Last Login</th>\\n          <td>{{ user.lastLoginDateTime | date:'yyyy-MM-dd HH:mm' }}</td>\\n        </tr>\\n        <tr>\\n          <th>Previous Login</th>\\n          <td>{{ user.previousLoginDateTime | date:'yyyy-MM-dd HH:mm' }}</td>\\n        </tr>\\n        <tr>\\n          <th>Roles</th>\\n          <td><span *ngFor=\\\"let userRoles of user.userRoles; let i = index\\\"><span *ngIf=\\\"i>0\\\">, </span>{{ userRoles.role.name }}</span></td>\\n        </tr>\\n      </tbody>\\n    </table>\\n    <div>\\n      <button class=\\\"btn btn-primary m-1\\\" (click)=\\\"open(content)\\\">Delete</button>\\n    </div>\\n  </div>\\n  <ng-template #notFound>\\n    <div class=\\\"alert alert-warning\\\">No record found.</div>\\n  </ng-template>\\n</div>\\n\\n<ng-template #loadingOrError>\\n  <ng-container *ngIf=\\\"error; else loading\\\">\\n    <div class=\\\"alert alert-danger\\\">{{ error }}</div>\\n  </ng-container>\\n  <ng-template #loading>\\n    <div>Loading ...</div>\\n  </ng-template>\\n</ng-template>\\n\\n<ng-template #content let-modal>\\n  <div class=\\\"modal-header\\\">\\n    <h4 class=\\\"modal-title\\\" id=\\\"modal-basic-title\\\">Warning</h4>\\n  </div>\\n  <div class=\\\"modal-body\\\">\\n        <div>Are you sure you want to delete your account with all your user data?</div>\\n  </div>\\n  <div class=\\\"modal-footer\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-outline-dark\\\" (click)=\\\"modal.close('No')\\\">No</button>    \\n    <button type=\\\"button\\\" class=\\\"btn btn-outline-dark\\\" (click)=\\\"modal.close('Yes'); deleteUser()\\\">Yes</button>\\n  </div>\\n</ng-template>\\n\";"],"sourceRoot":"webpack:///"}