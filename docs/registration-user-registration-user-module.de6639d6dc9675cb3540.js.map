{"version":3,"sources":["./src/app/registration-user/registration-user.component.ts","./src/app/registration-user/registration-user.component.scss","./src/app/registration-user/registration-user.component.html","./src/app/registration-user/registration-user.module.ts","./src/app/registration-user/registration-user-routing.module.ts"],"names":[],"mappings":"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","file":"registration-user-registration-user-module.de6639d6dc9675cb3540.js","sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { UserService, RegistrationUser } from '../user/user.service';\nimport { Router } from '@angular/router';\nimport { LoginCredentials, LoginService } from '../login/login.service';\nimport { Subscription } from 'rxjs';\nimport { concatMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'ipfgp-registration-user',\n  templateUrl: './registration-user.component.html',\n  styleUrls: ['./registration-user.component.scss']\n})\nexport class RegistrationUserComponent implements OnInit, OnDestroy {\n\n  registrationUserError = false;\n  registrationUserSubscription: Subscription | null = null;\n\n  registrationUserForm = this.fb.group({\n    username: [null, [Validators.required, Validators.minLength(1), Validators.maxLength(255)]],\n    password: [null, [Validators.required, Validators.minLength(4), Validators.maxLength(100)]],\n    givenName: [null, [Validators.required, Validators.minLength(1), Validators.maxLength(255)]],\n    familyName: [null, [Validators.required, Validators.minLength(1), Validators.maxLength(255)]]\n  });\n\n  constructor(private fb: FormBuilder,\n    private router: Router,\n    private userService: UserService,\n    private loginService: LoginService) { }\n\n  ngOnInit(): void {\n    if (this.loginService.getJwtToken()) {\n      this.router.navigate(['']);\n    }\n  }\n\n  register(): void {\n    const registrationUser: RegistrationUser = new RegistrationUser(\n      this.registrationUserForm.get('username')!.value,\n      this.registrationUserForm.get('password')!.value,\n      this.registrationUserForm.get('givenName')!.value,\n      this.registrationUserForm.get('familyName')!.value\n    );\n    this.registrationUserSubscription = this.userService\n      .registerUser(registrationUser)\n      .pipe(concatMap(() =>\n        this.loginService.logIn(\n          new LoginCredentials(registrationUser.username, registrationUser.password)\n          )\n      )).subscribe(\n        () => {\n          this.registrationUserError = false;\n          this.router.navigate(['']);\n        },\n        () => this.registrationUserError = true\n      );\n  }\n\n  get username() { return this.registrationUserForm.get('username'); }\n\n  get password() { return this.registrationUserForm.get('password'); }\n\n  get givenName() { return this.registrationUserForm.get('givenName'); }\n\n  get familyName() { return this.registrationUserForm.get('familyName'); }\n\n  ngOnDestroy() {\n    if (this.registrationUserSubscription != null) this.registrationUserSubscription.unsubscribe();\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyZWdpc3RyYXRpb24tdXNlci5jb21wb25lbnQuc2NzcyJ9 */\";","export default \"<h2>User Registration</h2>\\n<div class=\\\"alert alert-danger\\\" *ngIf=\\\"registrationUserError\\\">\\n  <strong>Failed to register!</strong> Please check your username and password.\\n</div>\\n<form class=\\\"form\\\" (ngSubmit)=\\\"register()\\\" [formGroup]=\\\"registrationUserForm\\\">\\n  <div class=\\\"form-group\\\">\\n    <label for=\\\"username\\\">Username</label>\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" formControlName=\\\"username\\\" />\\n    <div *ngIf=\\\"username\\\">\\n      <div *ngIf=\\\"username.invalid && (username.dirty || username.touched)\\\" class=\\\"alert alert-danger\\\">\\n        <div *ngIf=\\\"username.errors\\\">\\n          <div *ngIf=\\\"username.errors.required || username.errors.minlength || username.errors.maxlength\\\">\\n            Username must be between 1 and 255 characters long.\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label for=\\\"password\\\">Password</label>\\n    <input type=\\\"password\\\" class=\\\"form-control\\\" formControlName=\\\"password\\\" />\\n    <div *ngIf=\\\"password\\\">\\n      <div *ngIf=\\\"password.invalid && (password.dirty || password.touched)\\\" class=\\\"alert alert-danger\\\">\\n        <div *ngIf=\\\"password.errors\\\">\\n          <div *ngIf=\\\"password.errors.required || password.errors.minlength || password.errors.maxlength\\\">\\n            Password must be between 4 and 100 characters long.\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label for=\\\"givenName\\\">Given Name</label>\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" formControlName=\\\"givenName\\\" />\\n    <div *ngIf=\\\"givenName\\\">\\n      <div *ngIf=\\\"givenName.invalid && (givenName.dirty || givenName.touched)\\\" class=\\\"alert alert-danger\\\">\\n        <div *ngIf=\\\"givenName.errors\\\">\\n          <div *ngIf=\\\"givenName.errors.required || givenName.errors.minlength || givenName.errors.maxlength\\\">\\n            Given name must be between 1 and 255 characters long.\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label for=\\\"familyName\\\">Family Name</label>\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" formControlName=\\\"familyName\\\" />\\n    <div *ngIf=\\\"familyName\\\">\\n      <div *ngIf=\\\"familyName.invalid && (familyName.dirty || familyName.touched)\\\" class=\\\"alert alert-danger\\\">\\n        <div *ngIf=\\\"familyName.errors\\\">\\n          <div *ngIf=\\\"familyName.errors.required || familyName.errors.minlength || familyName.errors.maxlength\\\">\\n            Family name must be between 1 and 255 characters long.\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\" [disabled]=\\\"registrationUserForm.invalid\\\">Register</button>\\n</form>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { RegistrationUserRoutingModule } from './registration-user-routing.module';\nimport { RegistrationUserComponent } from './registration-user.component';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n\n@NgModule({\n  declarations: [RegistrationUserComponent],\n  imports: [\n    CommonModule,\n    RegistrationUserRoutingModule,\n    ReactiveFormsModule\n  ]\n})\nexport class RegistrationUserModule { }\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { RegistrationUserComponent } from './registration-user.component';\n\nconst routes: Routes = [{ path: '', component: RegistrationUserComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class RegistrationUserRoutingModule { }\n"],"sourceRoot":"webpack:///"}