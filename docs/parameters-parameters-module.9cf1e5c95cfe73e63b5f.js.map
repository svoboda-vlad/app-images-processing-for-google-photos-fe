{"version":3,"sources":["./src/app/parameters/parameters.component.html","./src/app/parameters-edit/parameters-edit.component.scss","./src/app/parameters/parameters.module.ts","./src/app/parameters/parameters.component.ts","./src/app/parameters-edit/parameters-edit.component.html","./src/app/parameters/parameters-routing.module.ts","./src/app/parameters-edit/parameters-edit.component.ts","./src/app/parameters/parameters.component.scss"],"names":[],"mappings":"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","file":"parameters-parameters-module.9cf1e5c95cfe73e63b5f.js","sourcesContent":["export default \"<h2>Parameters</h2>\\n<div *ngIf=\\\"parameters$ | async as parameters; else loadingOrError\\\">\\n  <div class=\\\"alert alert-danger\\\" *ngIf=\\\"parametersResetToDefaultError\\\">\\n    <strong>Failed to reset parameters to default!</strong>\\n  </div>\\n  <div class=\\\"table-responsive-sm\\\" *ngIf=\\\"parameters; else notFound\\\">\\n    <table class=\\\"table table-sm\\\">\\n      <thead>\\n        <tr class=\\\"table-secondary\\\">\\n          <th scope=\\\"col\\\">Name</th>\\n          <th scope=\\\"col\\\">Value</th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        <tr>\\n          <th>Time diff for groups (in sec)</th>\\n          <td>{{ parameters.timeDiffGroup }}</td>\\n        </tr>\\n        <tr>\\n          <th>Resize width (px)</th>\\n          <td>{{ parameters.resizeWidth }}</td>\\n        </tr>\\n        <tr>\\n          <th>Resize height (px)</th>\\n          <td>{{ parameters.resizeHeight }}</td>\\n        </tr>\\n      </tbody>\\n    </table>\\n    <div>\\n      <button class=\\\"btn btn-primary m-1\\\" routerLink=\\\"edit\\\">Edit</button>\\n      <button class=\\\"btn btn-primary m-1\\\" (click)=\\\"open(content)\\\">Reset to default values</button>      \\n    </div>\\n  </div>\\n  <ng-template #notFound>\\n    <div class=\\\"alert alert-warning\\\">No record found.</div>\\n  </ng-template>\\n</div>\\n\\n<ng-template #loadingOrError>\\n  <ng-container *ngIf=\\\"error; else loading\\\">\\n    <div class=\\\"alert alert-danger\\\">{{ error }}</div>\\n  </ng-container>\\n  <ng-template #loading>\\n    <div>Loading ...</div>\\n  </ng-template>\\n</ng-template>\\n\\n<ng-template #content let-modal>\\n  <div class=\\\"modal-header\\\">\\n    <h4 class=\\\"modal-title\\\" id=\\\"modal-basic-title\\\">Warning</h4>\\n  </div>\\n  <div class=\\\"modal-body\\\">\\n        <div>Are you sure you want to reset parameters values to default?</div>\\n  </div>\\n  <div class=\\\"modal-footer\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-outline-dark\\\" (click)=\\\"modal.close('No')\\\">No</button>\\n    <button type=\\\"button\\\" class=\\\"btn btn-outline-dark\\\" (click)=\\\"modal.close('Yes'); resetToDefault()\\\">Yes</button>\\n  </div>\\n</ng-template>\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwYXJhbWV0ZXJzLWVkaXQuY29tcG9uZW50LnNjc3MifQ== */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ParametersRoutingModule } from './parameters-routing.module';\nimport { ParametersComponent } from './parameters.component';\nimport { ParametersEditComponent } from '../parameters-edit/parameters-edit.component';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n\n@NgModule({\n  declarations: [\n    ParametersComponent,\n    ParametersEditComponent\n  ],\n  imports: [\n    CommonModule,\n    ParametersRoutingModule,\n    ReactiveFormsModule\n  ]\n})\nexport class ParametersModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { ModalDismissReasons, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Observable, Subscription, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { ParametersService, Parameters } from './parameters.service';\n\n@Component({\n  selector: 'ipfgp-parameters',\n  templateUrl: './parameters.component.html',\n  styleUrls: ['./parameters.component.scss']\n})\nexport class ParametersComponent implements OnInit {\n\n  parameters$: Observable<Parameters> | null = null;\n  error: Object | null = null;\n  closeResult = '';\n  parametersResetToDefaultSubscription!: Subscription;\n  parametersResetToDefaultError = false;\n\n  constructor(private parametersService: ParametersService,\n    private modalService: NgbModal) {\n  }\n\n  ngOnInit(): void {\n    this.parameters$ = this.parametersService.getParameters()\n      .pipe(\n        catchError(err => {\n          this.error = err;\n          return throwError(err);\n        })\n      );\n  }\n\n  open(content: any) {\n    this.modalService.open(content).result.then((result) => {\n      this.closeResult = `Closed with: ${result}`;\n    }, (reason) => {\n      this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\n    });\n  }\n\n  private getDismissReason(reason: any): string {\n    if (reason === ModalDismissReasons.ESC) {\n      return 'by pressing ESC';\n    } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\n      return 'by clicking on a backdrop';\n    } else {\n      return `with: ${reason}`;\n    }\n  }\n\n  resetToDefault(): void {\n    this.parametersResetToDefaultSubscription = this.parametersService\n    .resetToDefault()\n      .subscribe(\n        () => {\n          this.parametersResetToDefaultError = false;\n          this.ngOnInit();\n        },\n        () => this.parametersResetToDefaultError = true\n      );    \n  }\n\n  ngOnDestroy() {\n    if (this.parametersResetToDefaultSubscription != null) this.parametersResetToDefaultSubscription.unsubscribe();\n  }  \n}\n\n","export default \"<h2>Edit Parameters</h2>\\n<div *ngIf=\\\"parameters$ | async as parameters; else loadingOrError\\\">\\n  <div class=\\\"alert alert-danger\\\" *ngIf=\\\"parametersUpdateError\\\">\\n    <strong>Failed to update parameters!</strong> Please check the data.\\n  </div>\\n  <form class=\\\"form\\\" (ngSubmit)=\\\"updateParameters()\\\" [formGroup]=\\\"parametersEditForm\\\">\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"timeDiffGroup\\\">Time diff for groups (in sec)</label>\\n      <input type=\\\"text\\\" class=\\\"form-control\\\" formControlName=\\\"timeDiffGroup\\\" />\\n      <div *ngIf=\\\"timeDiffGroup\\\">\\n        <div *ngIf=\\\"timeDiffGroup.invalid && (timeDiffGroup.dirty || timeDiffGroup.touched)\\\" class=\\\"alert alert-danger\\\">\\n          <div *ngIf=\\\"timeDiffGroup.errors\\\">\\n            <div *ngIf=\\\"timeDiffGroup.errors.required || timeDiffGroup.errors.min || timeDiffGroup.errors.max\\\">\\n              Time diff for groups (in sec) must be between 60 and 86400.\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"resizeWidth\\\">Resize width (px)</label>\\n      <input type=\\\"text\\\" class=\\\"form-control\\\" formControlName=\\\"resizeWidth\\\" />\\n      <div *ngIf=\\\"resizeWidth\\\">\\n        <div *ngIf=\\\"resizeWidth.invalid && (resizeWidth.dirty || resizeWidth.touched)\\\" class=\\\"alert alert-danger\\\">\\n          <div *ngIf=\\\"resizeWidth.errors\\\">\\n            <div *ngIf=\\\"resizeWidth.errors.required || resizeWidth.errors.min || resizeWidth.errors.max\\\">\\n              Resize width (px) must be between 1 and 10000.\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"resizeHeight\\\">Resize height (px)</label>\\n      <input type=\\\"text\\\" class=\\\"form-control\\\" formControlName=\\\"resizeHeight\\\" />\\n      <div *ngIf=\\\"resizeHeight\\\">\\n        <div *ngIf=\\\"resizeHeight.invalid && (resizeHeight.dirty || resizeHeight.touched)\\\" class=\\\"alert alert-danger\\\">\\n          <div *ngIf=\\\"resizeHeight.errors\\\">\\n            <div *ngIf=\\\"resizeHeight.errors.required || resizeHeight.errors.min || resizeHeight.errors.max\\\">\\n              Resize height (px) must be between 1 and 10000.\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\" [disabled]=\\\"parametersEditForm.invalid\\\">Save</button>\\n  </form>\\n</div>\\n\\n<ng-template #loadingOrError>\\n  <ng-container *ngIf=\\\"error; else loading\\\">\\n    <div class=\\\"alert alert-danger\\\">{{ error }}</div>\\n  </ng-container>\\n  <ng-template #loading>\\n    <div>Loading ...</div>\\n  </ng-template>\\n</ng-template>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ParametersEditComponent } from '../parameters-edit/parameters-edit.component';\nimport { ParametersComponent } from './parameters.component';\n\nconst routes: Routes = [{\n  path: '', component: ParametersComponent\n},\n{\n  path: 'edit',\n  component: ParametersEditComponent\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ParametersRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { Validators, FormBuilder } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Subscription, Observable, throwError } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\nimport { ParametersService, Parameters } from '../parameters/parameters.service';\n\n@Component({\n  selector: 'ipfgp-parameters-edit',\n  templateUrl: './parameters-edit.component.html',\n  styleUrls: ['./parameters-edit.component.scss']\n})\nexport class ParametersEditComponent implements OnInit {\n\n  parametersUpdateError = false;\n  error!: Object;\n  parametersUpdateSubscription!: Subscription;\n  parameters$!: Observable<Parameters>;\n  parametersObject!: Parameters;\n\n  parametersEditForm = this.fb.group({\n    timeDiffGroup: [null, [Validators.required, Validators.min(60), Validators.max(86400)]],\n    resizeWidth: [null, [Validators.required, Validators.min(1), Validators.max(10000)]],\n    resizeHeight: [null, [Validators.required, Validators.min(1), Validators.max(10000)]]\n  });\n\n  constructor(private fb: FormBuilder,\n    private router: Router,\n    private parametersService: ParametersService\n  ) { }\n\n  ngOnInit(): void {\n      this.parameters$ = this.parametersService.getParameters().pipe(\n        map(parameters => {\n          this.parametersObject = parameters;\n          this.parametersEditForm.patchValue({\n            timeDiffGroup: parameters.timeDiffGroup,\n            resizeWidth: parameters.resizeWidth,\n            resizeHeight: parameters.resizeHeight\n          });\n          return parameters;\n        }),\n        catchError(err => {\n          this.error = err;\n          return throwError(err);\n        })\n      )\n  }\n\n  updateParameters(): void {\n    const parameters: Parameters = new Parameters(\n      this.parametersEditForm.get('timeDiffGroup')!.value,\n      this.parametersEditForm.get('resizeWidth')!.value,\n      this.parametersEditForm.get('resizeHeight')!.value\n    );\n    this.parametersUpdateSubscription = this.parametersService\n      .updateParameters(parameters)\n      .subscribe(\n        () => {\n          this.parametersUpdateError = false;\n          this.router.navigate(['/parameters']);\n        },\n        () => this.parametersUpdateError = true\n      );\n  }\n\n  get timeDiffGroup() { return this.parametersEditForm.get('timeDiffGroup'); }\n\n  get resizeWidth() { return this.parametersEditForm.get('esizeWidth'); }\n\n  get resizeHeight() { return this.parametersEditForm.get('resizeHeight'); }\n\n  ngOnDestroy() {\n    if (this.parametersUpdateSubscription != null) this.parametersUpdateSubscription.unsubscribe();\n  }\n\n}\n\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwYXJhbWV0ZXJzLmNvbXBvbmVudC5zY3NzIn0= */\";"],"sourceRoot":"webpack:///"}