{"version":3,"sources":["./src/app/login/login.module.ts","./src/app/login/login.component.scss","./src/app/login/login-routing.module.ts","./src/app/login/login.component.html","./src/app/login/login.component.ts"],"names":[],"mappings":"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","file":"login-login-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { LoginRoutingModule } from './login-routing.module';\nimport { LoginComponent } from './login.component';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n\n@NgModule({\n  declarations: [LoginComponent],\n  imports: [\n    CommonModule,\n    LoginRoutingModule,\n    ReactiveFormsModule\n  ]\n})\nexport class LoginModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsb2dpbi5jb21wb25lbnQuc2NzcyJ9 */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { LoginComponent } from './login.component';\n\nconst routes: Routes = [{ path: '', component: LoginComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LoginRoutingModule { }\n","export default \"<h2>Login</h2>\\n<div class=\\\"alert alert-danger\\\" *ngIf=\\\"loginError\\\">\\n  <strong>Failed to login!</strong> Please check your username and password.\\n</div>\\n<div>\\n  <button class=\\\"btn btn-primary\\\" (click)=\\\"logInWithGoogle()\\\">\\n    Log In With Google\\n  </button>\\n</div>\\n<form class=\\\"form\\\" (ngSubmit)=\\\"logIn()\\\" [formGroup]=\\\"loginForm\\\">\\n  <div class=\\\"form-group\\\">\\n    <label for=\\\"username\\\">Username</label>\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" formControlName=\\\"username\\\" />\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label for=\\\"password\\\">Password</label>\\n    <input type=\\\"password\\\" class=\\\"form-control\\\" formControlName=\\\"password\\\" />\\n  </div>\\n\\n  <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">Login</button>\\n</form>\\n\";","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { LoginService, LoginCredentials } from './login.service';\nimport { Router } from '@angular/router';\nimport { UserService } from '../user/user.service';\nimport { concatMap } from 'rxjs/operators';\nimport { Subscription } from 'rxjs';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n  selector: 'ipfgp-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent implements OnInit, OnDestroy {\n\n  loginError = false;\n  loginSubscription: Subscription | null = null;\n\n  loginForm = this.fb.group({\n    username: [null, [Validators.required]],\n    password: [null, [Validators.required]]\n  });\n\n  constructor(private fb: FormBuilder,\n    private router: Router,\n    private loginService: LoginService,\n    private userService: UserService) { }\n\n  ngOnInit(): void {\n    if (this.loginService.getJwtToken()) {\n      this.router.navigate(['']);\n    }\n  }\n\n  logIn(): void {\n    const user: LoginCredentials = new LoginCredentials(\n      this.loginForm.get('username')!.value,\n      this.loginForm.get('password')!.value\n    );\n    this.loginSubscription = this.loginService\n      .logIn(user)\n      .pipe(\n        concatMap(() => this.userService.getCurrentUser())\n      ).subscribe(() => {\n        this.loginError = false;\n        this.router.navigate(['']);\n      },\n      () => this.loginError = true);\n  }\n\n  ngOnDestroy() {\n    if(this.loginSubscription != null)\n    this.loginSubscription.unsubscribe();\n  }\n\n  logInWithGoogle(): void {\n    location.href = \"https://accounts.google.com/o/oauth2/v2/auth?client_id=\" + environment.GOOGLE_CLIENT_ID\n    + \"&redirect_uri=\" + environment.FRONT_END_URL + \"google-login&response_type=id_token%20token&scope=profile&nonce=abcdef\";\n  }\n\n}\n"],"sourceRoot":"webpack:///"}